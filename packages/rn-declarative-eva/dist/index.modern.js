import*as be from"react";import{OneSlotFactory as Ft}from"rn-declarative";import*as Z from"react";import{CheckBox as he}from"@ui-kitten/components";import{StyleSheet as ye}from"react-native";var Ie=ye.create({root:{height:45}}),xe=({disabled:e,onChange:o,onFocus:s,onBlur:u,title:f,value:n})=>Z.createElement(he,{disabled:e,checked:!!n,onChange:()=>o(!n),onFocus:s,onBlur:u,style:Ie.root},f),v=xe;import*as z from"react";import{useState as Pe}from"react";import{StyleSheet as Re,View as we}from"react-native";import{useActualValue as Oe}from"rn-declarative";import{Spinner as Ce,Button as Ae}from"@ui-kitten/components";var Be=Re.create({indicator:{justifyContent:"center",alignItems:"center"}}),ke=()=>z.createElement(we,{style:Be.indicator},z.createElement(Ce,{size:"small"})),Fe=({disabled:e,press:o,title:s,placeholder:u,onFocus:f,onBlur:n})=>{let[S,y]=Pe(!1),d=Oe(S);return z.createElement(Ae,{onPress:async()=>{let{current:r}=d;if(!r){y(!0);try{await o()}finally{y(!1)}}},onFocus:f,onBlur:n,disabled:!!S||e,accessoryLeft:S?z.createElement(ke,null):void 0},s||u)},V=Fe;import*as k from"react";import{useMemo as X,useState as je,useRef as K,useEffect as Ee}from"react";import{Icon as Ne,IndexPath as W,Select as ee,SelectItem as te}from"@ui-kitten/components";import{Pressable as Te}from"react-native";import{useOneState as Le,useOneProps as Me,useOnePayload as Ue,useAsyncAction as ze,useRenderWaiter as De}from"rn-declarative";var Ye=new W(0),He=e=>Object.values(e||{}).sort((o,s)=>s.localeCompare(o)).join("-"),_e=({value:e,disabled:o,readonly:s,description:u="",placeholder:f="",itemList:n=[],watchItemList:S,noDeselect:y,freeSolo:d,title:l="",dirty:r,invalid:p,incorrect:g,tr:x=a=>a.toString(),onChange:b})=>{let{object:a}=Le(),C=Ue(),[c,A]=je(()=>({options:[],labels:{}})),R=K(!1),B=De([c],10),m=X(()=>{if(Array.isArray(e)){let[i]=e;return i}return e},[e]),w=X(()=>m&&(c.labels[m]||m)||void 0,[m]),P=X(()=>{if(Array.isArray(e)){let[O]=e,t=c.options.findIndex(I=>I===O);return t===void 0?void 0:O?new W(t):void 0}let i=c.options.findIndex(O=>O===e);if(i!==void 0)return e?new W(i):void 0},[e]),{fallback:h}=Me(),{loading:E,execute:q}=ze(async i=>{let O={};n=n||[];let t=[...new Set(Object.values(typeof n=="function"?await Promise.resolve(n(i,C)):n))];await Promise.all(t.map(async I=>O[I]=await Promise.resolve(x(I,i,C)))),d&&m&&!t.includes(m)&&t.push(m),A({labels:O,options:t}),R.current=!0,await B()},{fallback:h}),J=He(m),H=K(null),_=K(!0);Ee(()=>{!_.current&&(H.current===a||!S)||(H.current=a,_.current=!1,q(a))},[J,o,r,p,g,a,s]);let L=X(()=>r&&(p!==null||g!==null),[r,p,g]),M=i=>{s||o||b(i||null)};return E||!R.current?k.createElement(ee,{key:"loading",size:"medium",value:"Loading",selectedIndex:Ye,caption:r&&(p||g)||u,placeholder:f,label:l,status:L?"danger":"basic",disabled:!0},k.createElement(te,{title:"Loading"})):k.createElement(ee,{disabled:o,selectedIndex:P,caption:r&&(p||g)||u,placeholder:f,label:l,size:"medium",value:w,status:L?"danger":"basic",onSelect:i=>{i instanceof W&&M(c.options[i.row])},accessoryRight:y?void 0:k.createElement(Te,{onPress:()=>M(null)},k.createElement(Ne,{name:"close"}))},c.options.map(i=>k.createElement(te,{key:i,title:c.labels[i]||i})))},oe=_e;import*as F from"react";import{useMemo as D,useState as Xe,useRef as $,useEffect as We}from"react";import{Icon as $e,IndexPath as re,Select as ne,SelectItem as se}from"@ui-kitten/components";import{compareArray as Ge,isObject as qe,useOneState as Je,useOneProps as Ke,useOnePayload as Qe,useAsyncAction as Ze,useRenderWaiter as ve}from"rn-declarative";import{Pressable as Ve}from"react-native";var et=new re(0),tt=e=>Object.values(e||{}).sort((o,s)=>s.localeCompare(o)).join("-"),ot=({value:e,disabled:o,readonly:s,description:u,placeholder:f,itemList:n=[],freeSolo:S,noDeselect:y,watchItemList:d,dirty:l,invalid:r,incorrect:p,title:g,tr:x=a=>a.toString(),onChange:b})=>{let{object:a}=Je(),C=Qe(),[c,A]=Xe(()=>({options:[],labels:{}})),R=$(!1),B=ve([c],10),m=D(()=>{if(typeof e=="string")return[e];if(e){let t=Object.values(e);return qe(t)?[]:t}return[]},[e]),w=$(m),P=D(()=>Ge(w.current,m)?w.current:(w.current=m,m),[m]),h=D(()=>P.map(t=>{let I=c.options.findIndex(N=>N===t);return I!==-1?new re(I):void 0}).filter(t=>t),[P]),E=D(()=>P.map(t=>c.labels[t]||t).join(", ")||void 0,[P]),{fallback:q}=Ke(),{loading:J,execute:H}=Ze(async t=>{let I={};n=n||[];let N=[...new Set(Object.values(typeof n=="function"?await Promise.resolve(n(t,C)):n))];await Promise.all(N.map(async U=>I[U]=await Promise.resolve(x(U,t,C)))),S&&P.forEach(U=>{N.includes(U)||N.push(U)}),A({options:N,labels:I}),R.current=!0,await B()},{fallback:q}),_=tt(P),L=$(null),M=$(!0);We(()=>{!M.current&&(L.current===a||!d)||(L.current=a,M.current=!1,H(a))},[_,o,l,r,p,a,s]);let i=D(()=>l&&(r!==null||p!==null),[l,r,p]),O=t=>{o||s||b(t!=null&&t.length?t:null)};return J||!R.current?F.createElement(ne,{key:"loading",value:"Loading",size:"medium",selectedIndex:et,caption:l&&(r||p)||u,placeholder:f,label:g,status:i?"danger":"basic",disabled:!0},F.createElement(se,{title:"Loading"})):F.createElement(ne,{multiSelect:!0,disabled:o,selectedIndex:h,value:E,size:"medium",caption:l&&(r||p)||u,placeholder:f,label:g,status:i?"danger":"basic",onSelect:t=>{Array.isArray(t)&&O(t.map(({row:I})=>c.options[I]))},accessoryRight:y?void 0:F.createElement(Ve,{onPress:()=>O(null)},F.createElement($e,{name:"close"}))},c.options.map(t=>F.createElement(se,{key:t,title:c.labels[t]||t})))},ae=ot;import*as ce from"react";import{useCallback as le,useEffect as nt,useMemo as st}from"react";import{Radio as rt}from"@ui-kitten/components";import{useOneRadio as at,useActualValue as lt}from"rn-declarative";import{StyleSheet as ct}from"react-native";var it=ct.create({root:{height:45}}),ut=({disabled:e,onChange:o,onFocus:s,onBlur:u,title:f,radioValue:n,value:S,name:y=""})=>{let[d,l]=at(),r=lt(d),p=st(()=>d[y]===n,[d]),g=le(b=>l(a=>({...a,[y]:b})),[]),x=le(b=>{g(b),o(b)},[]);return nt(()=>{let{current:b}=r;S!==b[y]&&g(S)},[S]),ce.createElement(rt,{checked:p,disabled:e,onChange:()=>x(n||null),onFocus:s,onBlur:u,style:it.root},f)},ie=ut;import*as T from"react";import{useMemo as ft}from"react";import{Pressable as ue}from"react-native";import{Input as mt}from"@ui-kitten/components";import{useOnePayload as dt,useOneState as pt}from"rn-declarative";var gt="Loading",St=({invalid:e,incorrect:o,value:s,disabled:u,readonly:f,description:n="",title:S="",leadingIcon:y,trailingIcon:d,leadingIconPress:l,trailingIconPress:r,inputMultiline:p=!1,placeholder:g="",dirty:x,loading:b,onChange:a,onFocus:C,onBlur:c})=>{let A=dt(),{object:R,changeObject:B}=pt(),m=ft(()=>x&&(e!==null||o!==null),[x,e,o]);return T.createElement(mt,{label:S,size:"medium",value:b?gt:s||"",disabled:u||b,multiline:p,accessoryRight:d?T.createElement(ue,{onPress:()=>r&&r(s,R,A,a,B)},T.createElement(d,null)):void 0,accessoryLeft:y?T.createElement(ue,{onPress:()=>l&&l(s,R,A,a,B)},T.createElement(y,null)):void 0,onFocus:C,onBlur:c,onChangeText:w=>{f||a(w)},caption:x&&(e||o)||n,placeholder:g,status:m?"danger":"basic"})},fe=St;import*as me from"react";import{Toggle as bt}from"@ui-kitten/components";var ht=({disabled:e,value:o,onChange:s,onFocus:u,onBlur:f,title:n})=>me.createElement(bt,{checked:!!o,disabled:e,onChange:()=>s(!o),onFocus:u,onBlur:f},n),de=ht;import*as j from"react";import{useMemo as Q,useState as yt,useEffect as It,useRef as xt}from"react";import{Icon as Pt,IndexPath as G,Select as pe,SelectItem as ge}from"@ui-kitten/components";import{useOnePayload as Rt,useOneProps as wt,useOneState as Ot,useAsyncAction as Ct}from"rn-declarative";import{Pressable as At}from"react-native";var Y=["Yes","No"],Bt=new G(0),kt=({value:e,disabled:o,readonly:s,description:u="",placeholder:f="",noDeselect:n,title:S="",tr:y=g=>g,dirty:d,invalid:l,incorrect:r,onChange:p})=>{let[g,x]=yt({}),b=xt(!1),a=Rt(),{object:C}=Ot(),c=Q(()=>{if(e===!0)return new G(0);if(e===!1)return new G(1)},[e]),A=Q(()=>{if(e===!0)return Y[0];if(e===!1)return Y[1]},[c]),{fallback:R}=wt(),{loading:B,execute:m}=Ct(async()=>{let h={};await Promise.all(Y.map(async E=>h[E]=await Promise.resolve(y(E,C,a)))),x(h),b.current=!0},{fallback:R}),w=Q(()=>d&&(l!==null||r!==null),[d,l,r]);It(()=>{m()},[]);let P=h=>{s||o||p(h==="Yes"?!0:h==="No"?!1:null)};return B||!b.current?j.createElement(pe,{key:"loading",value:"Loading",selectedIndex:Bt,caption:d&&(l||r)||u,placeholder:f,label:S,status:w?"danger":"basic",disabled:!0},j.createElement(ge,{title:"Loading"})):j.createElement(pe,{disabled:o,selectedIndex:c,value:A,caption:d&&(l||r)||u,placeholder:f,label:S,size:"medium",status:w?"danger":"basic",onSelect:h=>{h instanceof G&&P(Y[h.row])},accessoryRight:n?void 0:j.createElement(At,{onPress:()=>P(null)},j.createElement(Pt,{name:"close"}))},Y.map(h=>j.createElement(ge,{key:h,title:g[h]||h})))},Se=kt;var jt={CheckBox:v,Combo:oe,Items:ae,Radio:ie,Button:V,Text:fe,Switch:de,YesNo:Se},Et=({children:e})=>be.createElement(Ft,{...jt},e);export{Et as OneSlotFactory};
